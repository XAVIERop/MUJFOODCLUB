-- scripts/execute_inventory_cleanup.sql
-- ‚ö†Ô∏è DANGER: This will permanently delete items from your inventory!
-- üõ°Ô∏è Make sure you have a backup before running this!

-- Step 1: Show what will be deleted (for verification)
SELECT 
    'DELETION PREVIEW' as action,
    COUNT(*) as items_to_delete,
    STRING_AGG(name, ', ' ORDER BY name) as sample_items
FROM menu_items 
WHERE cafe_id = '90796879-9f3e-4e82-a639-d30d6095735a'
  AND name NOT IN (
        'BALAJI RUMBLES',
        'BALAJI CRUNCHEX SIMPLY SALTED',
        'BALAJI CRUNCHEX CHILLI TADKA',
        'BALAJI CRUNCHEX TOMATO TWIST',
        'BALAJI CRUNCHEM MASALA MASTI',
        'BALAJI CRUNCHEM CREAM ONION',
        'BALAJI CRUNCHEM CHAAT CHASKA',
        'BALAJI CRUNCHEM SIMPLY SALTED',
        'Lays Classic Salted',
        'Lays Tomato Tango',
        'LAYS POPCORN',
        'CRAX NATKHAT CLASSIC',
        'CRAX NATKHAT MASALA',
        'CRAX CARLS CHATPATA MASALA',
        'CRAX CHEES BALLS',
        'BINGO MAD ANGLES RED ALERT',
        'BINGO MAD ANGLES ACHARI MASTI',
        'BINGO MAD ANGLES MM MASALA',
        'BINGO MAD ANGLES CHAT MASTI',
        'BINGO MAD ANGLES TOMATO MADNESS',
        'BINGO MAD ANGLES VERY PERI PERI',
        'BINGO MAD ANGLES PIZZA AAAAH',
        'BINGO NACHOS CHILLI LEMON',
        'BINGO NACHOS CHEES NACHOS',
        'BINGO TADHE-MADHE',
        'CORNITOS TIKKA MASALA',
        'CORNITOS PERI PERI',
        'CORNITOS THAI',
        'CORNITOS SEA SALT',
        'CORNITOS TOMATO',
        'CORNITOS SALSA',
        'ACT2 SPICY PUDINA POPCORN',
        'ACT2 BUTTER POPCORN',
        'ACT2 SALTED POPCORN',
        'ACT2 TOMATO CHILLI POPCORN',
        'ACT2 CHEESE BURST POPCORN',
        'POPZ POPZ CHOCOLATY CRUNCH',
        'POPZ POPZ COOKIS & CREME',
        'POPZ POPZ HAZELNUT',
        'PEPSI',
        'BLACK PEPSI',
        'TROPICANA MIXFURIT',
        'TROPICANA GAVAWA',
        'MIRINDA',
        'NUMBOOZ',
        'DEW',
        'CHOCO-CHOCO',
        'CREAM BELL KESAR BADAM VANILA',
        'WINKIES WINKIES FRUIT CAKE SLICED 40',
        'MAZZA',
        '7UP',
        'ORANGE PULPY',
        'WINKIES WINKIES FRUIT CAKE WITH RAISIN & TUTTI FRUTTI',
        'WINKIES WINKIES PINEAPPLE CAKE SLICED',
        'WINKIES WINKIES MARBLE CAKE SLICED',
        'WINKIES WINKIES FRUIT CAKE SLICED 30',
        'WINKIES WINKIES CHOCO CAKE SLICED',
        'WINKIES WINKIES CAFE SELECT BANANA HAZELNUT SLICED CAKE',
        'WINKIES WINKIES CAFE SELECT DOUBLE CHOCO SLICED CAKE',
        'WINKIES WINKIES CHOCOLUV SWISS ROLL',
        'WINKIES WINKIES FRUIT CAKE SLICED 20',
        'WINKIES WINKIES CLASSIC VANILLA SLICE CAKE',
        'WINKIES WINKIES SWISS ROLL STRAWBERRY JAM',
        'WINKIES WINKIES SWISS ROLL CHOCOLATE FLAVOUR',
        'COKE',
        'COKE (LARGE)',
        'THUMS UP (LARGE)',
        'LIMCA',
        'FANTA',
        'SPRITE',
        'SPRITE (LARGE)',
        'DIET COKE',
        'FANTA (300ML)',
        'THUMS UP (300ML)',
        'SPRITE (300ML)',
        'PREDATOR',
        'MONSTER WHITE ULTRA',
        'MONSTER GREEN',
        'PAPERBOAT PAPERBOAT ZERO SPARKLING WATER LEMON LIME',
        'PAPERBOAT PAPERBOAT ZERO SPARKLING WATER GREEN APPLE',
        'PAPERBOAT PAPERBOAT SWING COCONUT WATER DRINK',
        'PAPERBOAT PAPERBOAT SWING YUMMY GUAVA JUICIER DRINK',
        'PAPERBOAT PAPERBOAT SWING MIXED FRUIT MEDLEY',
        'PAPERBOAT PAPERBOAT SWING ZESTY POMEGRANATE 45',
        'PAPERBOAT PAPERBOAT SWING LUSH LYCHES',
        'PAPERBOAT PAPERBOAT SWING SLEEPY MANGO',
        'PAPERBOAT PAPERBOAT SWING ZESTY POMEGRANATE 45'
    );

-- Step 2: Show what will be kept
SELECT 
    'KEEP PREVIEW' as action,
    COUNT(*) as items_to_keep,
    STRING_AGG(name, ', ' ORDER BY name) as sample_items
FROM menu_items 
WHERE cafe_id = '90796879-9f3e-4e82-a639-d30d6095735a'
  AND name IN (
        'BALAJI RUMBLES',
        'BALAJI CRUNCHEX SIMPLY SALTED',
        'BALAJI CRUNCHEX CHILLI TADKA',
        'BALAJI CRUNCHEX TOMATO TWIST',
        'BALAJI CRUNCHEM MASALA MASTI',
        'BALAJI CRUNCHEM CREAM ONION',
        'BALAJI CRUNCHEM CHAAT CHASKA',
        'BALAJI CRUNCHEM SIMPLY SALTED',
        'Lays Classic Salted',
        'Lays Tomato Tango',
        'LAYS POPCORN',
        'CRAX NATKHAT CLASSIC',
        'CRAX NATKHAT MASALA',
        'CRAX CARLS CHATPATA MASALA',
        'CRAX CHEES BALLS',
        'BINGO MAD ANGLES RED ALERT',
        'BINGO MAD ANGLES ACHARI MASTI',
        'BINGO MAD ANGLES MM MASALA',
        'BINGO MAD ANGLES CHAT MASTI',
        'BINGO MAD ANGLES TOMATO MADNESS',
        'BINGO MAD ANGLES VERY PERI PERI',
        'BINGO MAD ANGLES PIZZA AAAAH',
        'BINGO NACHOS CHILLI LEMON',
        'BINGO NACHOS CHEES NACHOS',
        'BINGO TADHE-MADHE',
        'CORNITOS TIKKA MASALA',
        'CORNITOS PERI PERI',
        'CORNITOS THAI',
        'CORNITOS SEA SALT',
        'CORNITOS TOMATO',
        'CORNITOS SALSA',
        'ACT2 SPICY PUDINA POPCORN',
        'ACT2 BUTTER POPCORN',
        'ACT2 SALTED POPCORN',
        'ACT2 TOMATO CHILLI POPCORN',
        'ACT2 CHEESE BURST POPCORN',
        'POPZ POPZ CHOCOLATY CRUNCH',
        'POPZ POPZ COOKIS & CREME',
        'POPZ POPZ HAZELNUT',
        'PEPSI',
        'BLACK PEPSI',
        'TROPICANA MIXFURIT',
        'TROPICANA GAVAWA',
        'MIRINDA',
        'NUMBOOZ',
        'DEW',
        'CHOCO-CHOCO',
        'CREAM BELL KESAR BADAM VANILA',
        'WINKIES WINKIES FRUIT CAKE SLICED 40',
        'MAZZA',
        '7UP',
        'ORANGE PULPY',
        'WINKIES WINKIES FRUIT CAKE WITH RAISIN & TUTTI FRUTTI',
        'WINKIES WINKIES PINEAPPLE CAKE SLICED',
        'WINKIES WINKIES MARBLE CAKE SLICED',
        'WINKIES WINKIES FRUIT CAKE SLICED 30',
        'WINKIES WINKIES CHOCO CAKE SLICED',
        'WINKIES WINKIES CAFE SELECT BANANA HAZELNUT SLICED CAKE',
        'WINKIES WINKIES CAFE SELECT DOUBLE CHOCO SLICED CAKE',
        'WINKIES WINKIES CHOCOLUV SWISS ROLL',
        'WINKIES WINKIES FRUIT CAKE SLICED 20',
        'WINKIES WINKIES CLASSIC VANILLA SLICE CAKE',
        'WINKIES WINKIES SWISS ROLL STRAWBERRY JAM',
        'WINKIES WINKIES SWISS ROLL CHOCOLATE FLAVOUR',
        'COKE',
        'COKE (LARGE)',
        'THUMS UP (LARGE)',
        'LIMCA',
        'FANTA',
        'SPRITE',
        'SPRITE (LARGE)',
        'DIET COKE',
        'FANTA (300ML)',
        'THUMS UP (300ML)',
        'SPRITE (300ML)',
        'PREDATOR',
        'MONSTER WHITE ULTRA',
        'MONSTER GREEN',
        'PAPERBOAT PAPERBOAT ZERO SPARKLING WATER LEMON LIME',
        'PAPERBOAT PAPERBOAT ZERO SPARKLING WATER GREEN APPLE',
        'PAPERBOAT PAPERBOAT SWING COCONUT WATER DRINK',
        'PAPERBOAT PAPERBOAT SWING YUMMY GUAVA JUICIER DRINK',
        'PAPERBOAT PAPERBOAT SWING MIXED FRUIT MEDLEY',
        'PAPERBOAT PAPERBOAT SWING ZESTY POMEGRANATE 45',
        'PAPERBOAT PAPERBOAT SWING LUSH LYCHES',
        'PAPERBOAT PAPERBOAT SWING SLEEPY MANGO',
        'PAPERBOAT PAPERBOAT SWING ZESTY POMEGRANATE 45'
    );

-- Step 3: ‚ö†Ô∏è ACTUAL DELETION (UNCOMMENT TO EXECUTE)
-- DELETE FROM menu_items 
-- WHERE cafe_id = '90796879-9f3e-4e82-a639-d30d6095735a'
--   AND name NOT IN (
--         'BALAJI RUMBLES',
--         'BALAJI CRUNCHEX SIMPLY SALTED',
--         'BALAJI CRUNCHEX CHILLI TADKA',
--         'BALAJI CRUNCHEX TOMATO TWIST',
--         'BALAJI CRUNCHEM MASALA MASTI',
--         'BALAJI CRUNCHEM CREAM ONION',
--         'BALAJI CRUNCHEM CHAAT CHASKA',
--         'BALAJI CRUNCHEM SIMPLY SALTED',
--         'Lays Classic Salted',
--         'Lays Tomato Tango',
--         'LAYS POPCORN',
--         'CRAX NATKHAT CLASSIC',
--         'CRAX NATKHAT MASALA',
--         'CRAX CARLS CHATPATA MASALA',
--         'CRAX CHEES BALLS',
--         'BINGO MAD ANGLES RED ALERT',
--         'BINGO MAD ANGLES ACHARI MASTI',
--         'BINGO MAD ANGLES MM MASALA',
--         'BINGO MAD ANGLES CHAT MASTI',
--         'BINGO MAD ANGLES TOMATO MADNESS',
--         'BINGO MAD ANGLES VERY PERI PERI',
--         'BINGO MAD ANGLES PIZZA AAAAH',
--         'BINGO NACHOS CHILLI LEMON',
--         'BINGO NACHOS CHEES NACHOS',
--         'BINGO TADHE-MADHE',
--         'CORNITOS TIKKA MASALA',
--         'CORNITOS PERI PERI',
--         'CORNITOS THAI',
--         'CORNITOS SEA SALT',
--         'CORNITOS TOMATO',
--         'CORNITOS SALSA',
--         'ACT2 SPICY PUDINA POPCORN',
--         'ACT2 BUTTER POPCORN',
--         'ACT2 SALTED POPCORN',
--         'ACT2 TOMATO CHILLI POPCORN',
--         'ACT2 CHEESE BURST POPCORN',
--         'POPZ POPZ CHOCOLATY CRUNCH',
--         'POPZ POPZ COOKIS & CREME',
--         'POPZ POPZ HAZELNUT',
--         'PEPSI',
--         'BLACK PEPSI',
--         'TROPICANA MIXFURIT',
--         'TROPICANA GAVAWA',
--         'MIRINDA',
--         'NUMBOOZ',
--         'DEW',
--         'CHOCO-CHOCO',
--         'CREAM BELL KESAR BADAM VANILA',
--         'WINKIES WINKIES FRUIT CAKE SLICED 40',
--         'MAZZA',
--         '7UP',
--         'ORANGE PULPY',
--         'WINKIES WINKIES FRUIT CAKE WITH RAISIN & TUTTI FRUTTI',
--         'WINKIES WINKIES PINEAPPLE CAKE SLICED',
--         'WINKIES WINKIES MARBLE CAKE SLICED',
--         'WINKIES WINKIES FRUIT CAKE SLICED 30',
--         'WINKIES WINKIES CHOCO CAKE SLICED',
--         'WINKIES WINKIES CAFE SELECT BANANA HAZELNUT SLICED CAKE',
--         'WINKIES WINKIES CAFE SELECT DOUBLE CHOCO SLICED CAKE',
--         'WINKIES WINKIES CHOCOLUV SWISS ROLL',
--         'WINKIES WINKIES FRUIT CAKE SLICED 20',
--         'WINKIES WINKIES CLASSIC VANILLA SLICE CAKE',
--         'WINKIES WINKIES SWISS ROLL STRAWBERRY JAM',
--         'WINKIES WINKIES SWISS ROLL CHOCOLATE FLAVOUR',
--         'COKE',
--         'COKE (LARGE)',
--         'THUMS UP (LARGE)',
--         'LIMCA',
--         'FANTA',
--         'SPRITE',
--         'SPRITE (LARGE)',
--         'DIET COKE',
--         'FANTA (300ML)',
--         'THUMS UP (300ML)',
--         'SPRITE (300ML)',
--         'PREDATOR',
--         'MONSTER WHITE ULTRA',
--         'MONSTER GREEN',
--         'PAPERBOAT PAPERBOAT ZERO SPARKLING WATER LEMON LIME',
--         'PAPERBOAT PAPERBOAT ZERO SPARKLING WATER GREEN APPLE',
--         'PAPERBOAT PAPERBOAT SWING COCONUT WATER DRINK',
--         'PAPERBOAT PAPERBOAT SWING YUMMY GUAVA JUICIER DRINK',
--         'PAPERBOAT PAPERBOAT SWING MIXED FRUIT MEDLEY',
--         'PAPERBOAT PAPERBOAT SWING ZESTY POMEGRANATE 45',
--         'PAPERBOAT PAPERBOAT SWING LUSH LYCHES',
--         'PAPERBOAT PAPERBOAT SWING SLEEPY MANGO',
--         'PAPERBOAT PAPERBOAT SWING ZESTY POMEGRANATE 45'
--     );

-- Step 4: Verify final count (run after deletion)
-- SELECT COUNT(*) as final_item_count
-- FROM menu_items 
-- WHERE cafe_id = '90796879-9f3e-4e82-a639-d30d6095735a';
